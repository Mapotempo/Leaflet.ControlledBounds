<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
    <script src="../src/Leaflet.ControlledBounds.js"></script>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <div id="map"></div>


    <div id="b1" class="border"></div>
    <div id="b2" class="border"></div>
    <div id="b3" class="border"></div>
    <div id="b4" class="border"></div>
    <div id="c"  class="border"></div>
<!--    <div class="explanation">
        <h1>Leaflet-active-area</h1>
        <h2>An active area ?</h2>
        <p>
            This plugin allows you to use a smaller portion of the map as an active area.
            All positionning methods (setView, fitBounds, setZoom) will be applyed on this portion instead of the all map.
        </p>
        <p>
            A typical use case is to set a map as background (like that example) and center it on the top of the screen for example.
        </p>
        <p>
            Try to center the map to <a href="#" class="london">London</a> or <a href="#" class="paris">Paris</a>, <a href="#" class="zoomin">zoom in</a> or <a href="#" class="zoomout">out</a> or <a href="#" class="fitbounds">fitbounds</a>.
            As you see, the center of the map is within the div with a green border and <strong>not</strong> the center of the screen.
        </p>
        <h2>Zone active ?</h2>
        <p>
            Ce plugin vous permet d’utiliser une petite porition de votre carte comme zone active.
            Les méthodes de positionnement (setView, fitBounds, setZoom) s’appliqueront à cette porition au lieu de toute la carte.
        </p>
        <p>
            Un exemple typique est d’afficher une carte sur la totalité de l’écran (comme sur cet exemple) mais de la centrer en haut de l’écran par exemple.
        </p>
        <p>
            Essayer de centrer la carte sur <a href="#" class="london">Londres</a> ou <a href="#" class="paris">Paris</a>, <a href="#" class="zoomin">zoomer</a> ou <a href="#" class="zoomout">dézoomer</a> ou encore <a href="#" class="fitbounds">fitbounds</a>.
            Comme vous pouvez le voir, la carte se centre à l’intérieur du div avec une bordure verte et <strong>non</strong> depuis le centre de l’écran.
        </p>
        <p>
            <a href="https://github.com/Mappy/Leaflet-active-area">https://github.com/Mappy/Leaflet-active-area</a>
        </p>
    </div>-->
    <script type="text/javascript">

        var Madrid = [40.383333,-3.716667];
        var Trondheim = [63.429722,10.393333];

        var map = new L.Map('map', {zoomControl: false, attributionControl: false}).setView(Madrid, 2);
//         map.scrollWheelZoom.disable();

		console.log("Map bounds before controls have been added: ",map.getBounds().toBBoxString());

        var markers = L.featureGroup([L.marker(Madrid), L.marker(Trondheim)]);
        markers.addTo(map);

        var base = L.tileLayer('http://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png', {
			attribution: '<a href="https://www.mapbox.com/about/maps/">Terms and Feedback</a>',
			id: 'examples.map-20v6611k'
		})
        base.addTo(map);

        function displayBounds() {
			var bounds = map.getControlledBounds();
// 			console.log('pixel bounds: ', bounds);
			// Four <div>s so that the user can still scroll in the map
			var b1 = document.getElementById('b1');	// top
			var b2 = document.getElementById('b2');	// bottom
			var b3 = document.getElementById('b3');	// left
			var b4 = document.getElementById('b4');	// right
			var c  = document.getElementById('c');	// center
			b1.style.top   = b3.style.top   = b4.style.top   = bounds.min.y + 'px';
			b1.style.left  = b2.style.left  = b3.style.left  = bounds.min.x + 'px';
			b1.style.width = b2.style.width = bounds.max.x - bounds.min.x - 2 + 'px';
							b4.style.left  = bounds.max.x                - 2 + 'px';
			b3.style.height= b4.style.height= bounds.max.y - bounds.min.y - 2 + 'px';
							b2.style.top   = bounds.max.y                - 2 + 'px';
	// 		b.style.height= bounds.max.y - bounds.min.y - 2 + 'px';

			c.style.top  = (bounds.min.y + bounds.max.y) / 2 - 2 + 'px';
			c.style.left = (bounds.min.x + bounds.max.x) / 2 - 2 + 'px';


			console.log("Map bounds after controls have been added: ",map.getBounds().toBBoxString());
			console.log("Map center: ",map.getCenter());
		}

		displayBounds();

        window.setTimeout(function(){
			L.control.attribution().addTo(map);
			L.control.zoom().addTo(map);
// 			L.control.zoom().addTo(map);
			displayBounds();
		}, 2000 );

        window.setTimeout(function(){
			L.control.layers([base]).addTo(map);
			L.control.scale().addTo(map);
			L.control.layers([base],[],{ position:'bottomleft' }).addTo(map);
			displayBounds();
		}, 5000);


    </script>

    <div style='clear:both'>
    <button onclick='map.setView(Madrid, 16)'>Madrid</button>
    <button onclick='map.setView(Trondheim, 16)'>Trondheim</button>
    <button onclick='map.zoomIn()'>Zoom in</button>
    <button onclick='map.zoomOut()'>Zoom out</button>
    </div>


</body>
</html>
